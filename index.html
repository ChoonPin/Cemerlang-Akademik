<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AJK Selection - Cemerlang Akademik</title>
    <link rel="stylesheet" href="style.css">
    <!-- Firebase SDK -->
    <script type="module">
        // Import Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCuXtajCX1ccTz-qhTFzX6oQIm6ngX7DjI",
            authDomain: "cemerlang-akademik.firebaseapp.com",
            projectId: "cemerlang-akademik",
            storageBucket: "cemerlang-akademik.firebasestorage.app",
            messagingSenderId: "644329352799",
            appId: "1:644329352799:web:06f59de006b043cd20b5ea",
            measurementId: "G-B6J4S85CYL"
        };

        // Initialize Firebase & Firestore
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Function to add new position
        async function addPosition() {
            const positionName = document.getElementById("positionName").value;
            const positionQuota = document.getElementById("positionQuota").value;

            if (positionName && positionQuota) {
                try {
                    await addDoc(collection(db, "positions"), {
                        name: positionName,
                        quota: parseInt(positionQuota)
                    });
                    document.getElementById("positionName").value = "";
                    document.getElementById("positionQuota").value = "";
                } catch (error) {
                    console.error("Error adding position:", error);
                }
            } else {
                alert("Please enter position name and quota.");
            }
        }

        // Real-time update of positions
        window.onload = () => {
            const positionsList = document.getElementById("positions");
            onSnapshot(collection(db, "positions"), (snapshot) => {
                positionsList.innerHTML = "";
                snapshot.forEach((doc) => {
                    const data = doc.data();
                    positionsList.innerHTML += `<div class="position-card">
                        <h3>${data.name}</h3>
                        <p>Quota: ${data.quota}</p>
                    </div>`;
                });
            });
        };
    </script>
</head>
<body>

    <h2>Cemerlang Akademik (1 Mei 2025) - AJK Selection</h2>

    <div class="card">
        <h3>Add New Position</h3>
        <div class="d-flex">
            <input type="text" id="positionName" placeholder="Enter Position Name">
            <input type="number" id="positionQuota" placeholder="Enter Quota">
            <button id="addPositionBtn" onclick="addPosition()">Add Position</button>
        </div>
    </div>

    <h4>Available Positions</h4>
    <div id="positions"></div>

</body>
</html>
