<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cemerlang Akademik - AJK Selection</title>
    <script type="module" src="app.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">

    <div class="container mt-5">
        <h2 class="text-center text-primary">Cemerlang Akademik (1 Mei 2025) - AJK Selection</h2>

        <!-- Add New Position Form -->
        <div class="card mt-4 p-4 shadow-sm">
            <h4 class="text-center">Add New Position</h4>
            <div class="d-flex justify-content-center">
                <input type="text" id="positionName" class="form-control m-2" placeholder="Enter Position Name">
                <input type="number" id="positionQuota" class="form-control m-2" placeholder="Enter Quota">
                <button id="addPositionBtn" class="btn btn-success m-2">Add Position</button>
            </div>
        </div>

        <!-- Available Positions -->
        <div class="mt-4">
            <h4 class="text-center">Available Positions</h4>
            <div id="positions" class="row">
                <!-- Positions will be loaded here dynamically -->
            </div>
        </div>
    </div>

    <script>
        document.getElementById("addPositionBtn").addEventListener("click", async () => {
            const name = document.getElementById("positionName").value.trim();
            const quota = parseInt(document.getElementById("positionQuota").value);

            if (!name || isNaN(quota) || quota <= 0) {
                alert("Please enter a valid position name and quota.");
                return;
            }

            // Add to Firestore
            import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
            const db = getFirestore();

            try {
                await addDoc(collection(db, "positions"), { name, quota });
                alert("Position added successfully!");
                location.reload(); // Refresh page to update list
            } catch (error) {
                console.error("Error adding position:", error);
                alert("Error adding position. Please try again.");
            }
        });
    </script>

</body>
</html>
